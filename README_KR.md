# 📦 인벤토리 백업

<div align="center">

![Minecraft](https://img.shields.io/badge/Minecraft-1.21.1-green?style=for-the-badge&logo=minecraft)
![NeoForge](https://img.shields.io/badge/NeoForge-52.0.19-orange?style=for-the-badge)
![Java](https://img.shields.io/badge/Java-21-blue?style=for-the-badge&logo=openjdk)
![Localization](https://img.shields.io/badge/Languages-EN%20%7C%20RU%20%7C%20KO-blue?style=for-the-badge)
![License](https://img.shields.io/badge/License-All%20Rights%20Reserved-red?style=for-the-badge)

**플레이어 인벤토리 자동 백업 및 복원을 위한 강력한 마인크래프트 NeoForge 모드**

[기능](#-기능) • [설치](#-설치) • [명령어](#-명령어) • [설정](#️-설정) • [빌드](#-빌드)

📖 **[English Documentation](README.md)** | **[Русская документация](README.md)**

</div>

---

## 🌟 기능

### 🔄 자동 백업
- **⏰ 주기적 저장** - 10분마다 자동으로 인벤토리 저장
- **💀 사망 보호** - 플레이어 사망 시 백업 생성
- **➡️ 접속/종료 저장** - 플레이어 로그인 및 로그아웃 시 저장
- **🧹 스마트 정리** - 7일 이상 된 백업 자동 삭제

### 🎯 스마트 백업 시스템
- **📊 중복 제거** - 인벤토리가 변경된 경우에만 저장
- **🚫 빈 인벤토리 체크** - 빈 인벤토리는 저장하지 않음
- **🗂️ 체계적 저장** - 플레이어 UUID별로 백업 저장

### 💎 인터랙티브 채팅 인터페이스
페이지네이션과 빠른 필터가 있는 아름답고 클릭 가능한 버튼:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
         📦 백업 목록
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
플레이어: Steve
총 백업 수: 47
페이지: 1/5

빠른 필터: [📅 오늘] [어제] [이번 달] [전체]

1. 💀 2025-01-15-18-30-45 [사망] [👁] [↻] [📥]
2. ⏰ 2025-01-15-18-20-00 [자동] [👁] [↻] [📥]
3. ➡ 2025-01-15-18-00-15 [접속] [👁] [↻] [📥]
4. ⬅ 2025-01-15-17-45-30 [종료] [👁] [↻] [📥]
... 6개 더 ...
10. ⏰ 2025-01-15-14-30-00 [자동] [👁] [↻] [📥]

[◀ 이전 | 페이지: 1/5 | 다음 ▶]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**새로운 기능:**
- 📄 **페이지네이션** - 이전/다음 탐색이 있는 페이지당 10개 백업
- 🔍 **빠른 필터** - 원클릭 필터: 오늘, 어제, 이번 달, 전체
- 🌐 **완전한 현지화** - 한국어, 영어, 러시아어 완전 번역
- 🎨 **색상 코드 UI** - 읽기 쉬운 색상의 텍스트와 버튼

### 🎮 고급 기능
- **👁️ 미리보기 모드** - 인터랙티브 상자 GUI에서 백업 보기
- **✨ 드래그 & 드롭** - 백업에서 개별 아이템을 드래그하여 복사
- **⌨️ Shift+클릭** - Shift+클릭으로 아이템 빠르게 복사
- **↻ 복원** - 플레이어에게 백업 직접 로드
- **📥 자신에게 복사** - 백업 아이템을 자신의 인벤토리로 복사
- **🔍 스마트 필터링** - 빠른 필터 버튼으로 날짜/시간별 백업 검색
- **📄 페이지네이션 시스템** - 대용량 백업 목록 탐색 (페이지당 10개)
- **🌐 현지화** - 완전히 번역된 인터페이스 (한국어, 영어, 러시아어)
- **⚡ 비동기 I/O** - 논블로킹 디스크 작업으로 TPS 저하 방지

---

## 📥 설치

> **🖥️ 서버 전용 모드:** 이 모드는 **서버 사이드 전용**입니다 - 클라이언트에 설치할 필요가 없습니다!  
> 플레이어는 바닐라 클라이언트로 접속해서 기본 마인크래프트 GUI를 통해 모든 기능을 사용할 수 있습니다.

1. **다운로드** - 최신 릴리스 다운로드
2. **설치** - [Minecraft NeoForge 1.21.1](https://files.minecraftforge.net/)을 **서버에** 설치
3. **배치** - 서버의 `mods` 폴더에 모드 파일 배치
4. **시작** - 서버 시작 - 플레이어는 아무것도 설치하지 않고 접속 가능

---

## 🎮 명령어

> **🔒 보안:** 모든 명령어는 운영자 권한 (레벨 2)이 필요합니다 - 서버 관리자만 사용 가능

### 📋 주요 명령어

| 명령어 | 설명 |
|---------|-------------|
| `/inventory` | 사용 가능한 모든 명령어 도움말 표시 |
| `/inventory gui <플레이어>` | **GUI 백업 브라우저 열기** - 시각적으로 백업 선택 |
| `/inventory list <플레이어> [필터] [페이지]` | 페이지네이션과 빠른 필터로 백업 나열 |
| `/inventory view <플레이어> <백업>` | 백업의 읽기 전용 미리보기 열기 |
| `/inventory set <플레이어> <백업>` | 플레이어에게 백업 복원 |
| `/inventory copy <플레이어> <백업>` | 백업 아이템을 자신의 인벤토리로 복사 |

### 📖 예제

```bash
# GUI 백업 브라우저 열기 (권장)
/inventory gui Steve

# 플레이어 "Steve"의 모든 백업 나열 (첫 페이지)
/inventory list Steve

# 페이지네이션이 있는 백업 나열 - 2페이지
/inventory list Steve "" 2

# 2023년 3월의 백업 필터링
/inventory list Steve 2023-03

# 특정 날짜의 백업 필터링
/inventory list Steve 2025-01-15

# 특정 날짜의 백업 필터링, 2페이지
/inventory list Steve 2025-01-15 2

# 특정 백업 보기
/inventory view Steve 2025-01-15-14-30-45

# 플레이어에게 백업 복원
/inventory set Steve 2025-01-15-14-30-45-death

# 백업 아이템을 자신에게 복사
/inventory copy Steve 2025-01-15-14-30-45
```

### 🚀 빠른 필터 사용법

백업 목록을 볼 때, 즉시 필터링하려면 다음 버튼을 클릭하세요:
- **📅 오늘** - 오늘의 백업만 표시
- **어제** - 어제의 백업 표시
- **이번 달** - 현재 달의 백업 표시
- **전체** - 모든 필터 제거

---

## ⚙️ 설정

설정 파일: `config/inventory/InventoryBackups.toml`

### 🎛️ 사용 가능한 설정

```toml
[general]
    # 주기적 인벤토리 저장 활성화
    tickSaveEnabled = true

    # 저장 간격 (초 단위) (600 = 10분)
    preservationPeriod = 600

    # 플레이어 사망 시 인벤토리 저장
    deadSaveEnabled = true

    # 플레이어가 서버에 접속할 때 인벤토리 저장
    joinSaveEnabled = true

    # 플레이어가 서버에서 나갈 때 인벤토리 저장
    quitSaveEnabled = true

    # 플레이어가 컨테이너(상자, 배럴 등)를 닫을 때 인벤토리 저장
    # 경고: 활성화하면 많은 백업이 생성될 수 있습니다
    containerCloseSaveEnabled = false

    # 자동 삭제 전 백업 보관 일수
    retentionDays = 7
```

### 🔧 커스터마이징

- **백업 빈도 변경:** `preservationPeriod` 수정 (초 단위)
- **보관 기간:** `retentionDays` 조정 (1-365일)
- **특정 트리거 비활성화:** 모든 `*SaveEnabled`를 `false`로 설정

---

## 📂 파일 구조

```
InventoryLog/
└── inventory/
    └── <플레이어-uuid>/
        ├── 2025-01-15-18-30-45-death.json
        ├── 2025-01-15-18-20-00.json
        ├── 2025-01-15-18-00-15-join.json
        └── 2025-01-15-17-45-30-quit.json
```

### 🏷️ 백업 유형

| 접미사 | 아이콘 | 설명 |
|--------|------|-------------|
| `-death` | 💀 | 플레이어 사망 시 저장됨 |
| `-join` | ➡️ | 서버 접속 시 저장됨 |
| `-quit` | ⬅️ | 서버 퇴장 시 저장됨 |
| `-container-close` | 📦 | 컨테이너 닫기 시 저장됨 |
| *(없음)* | ⏰ | 자동 주기적 저장 |

---

## 🔨 빌드

### 필수 요구사항
- ✅ Java 21
- ✅ Gradle 8.11.1+

### 빌드 명령어

```bash
# 모드 빌드
./gradlew build

# 테스트용 클라이언트 실행
./gradlew runClient

# 테스트용 서버 실행
./gradlew runServer

# 빌드 아티팩트 정리
./gradlew clean
```

컴파일된 JAR은 `build/libs/`에 있습니다

---

## 🔒 보안 및 권한

### 🛡️ 접근 제어
모든 명령어는 **운영자 레벨 2** 권한이 필요합니다:
```bash
# 플레이어에게 운영자 상태 부여
/op 플레이어이름

# 권한 레벨 확인
/op list

# 운영자 상태 제거
/deop 플레이어이름
```

**권한 레벨:**
- 레벨 0 - 일반 플레이어 (접근 불가)
- 레벨 1 - 스폰 보호 우회 가능 (접근 불가)
- **레벨 2** - 치트 명령어 사용 가능 ✅ **이 모드에 필요**
- 레벨 3 - 플레이어 추방/차단 가능
- 레벨 4 - /op 및 /stop 사용 가능

### ✅ 저장되는 항목
- 주 인벤토리 (36 슬롯)
- 방어구 슬롯 (4 슬롯)
- 보조 슬롯
- 모든 아이템 NBT 데이터 (마법 부여, 커스텀 이름 등)
- Curios 슬롯 (Curios 모드 설치 시)

### 🛡️ 보호 기능
- **중복 제거** - 동일한 인벤토리는 저장하지 않음
- **빈 인벤토리 체크** - 빈 인벤토리 건너뛰기
- **자동 정리** - 오래된 백업 제거
- **손상 처리** - 우아한 오류 메시지
- **관리자 전용 접근** - 운영자 레벨 2 필요

---

## 📊 시스템 요구사항

| 구성 요소 | 요구사항 |
|-----------|-------------|
| 마인크래프트 | 1.21.1 |
| NeoForge | 52.0.19+ |
| Java | 21 |
| 서버 RAM | 512MB+ 권장 |
| 디스크 공간 | 백업 1000개당 ~10MB |
| 권한 | 운영자 레벨 2+ |

---

## 🎯 사용 사례

### 💼 서버 관리
- **그리핑 롤백** - 사고 후 플레이어 인벤토리 복원
- **버그 복구** - 버그/글리치로 인한 인벤토리 손실 수정
- **복제 감지** - 시간 경과에 따른 플레이어 인벤토리 감사

### 🎮 플레이어 보호
- **사고 복구** - 우발적 사망 후 아이템 복원
- **렉 사망** - 불공정한 렉 관련 사망 복구
- **위험한 행동 전 백업** - 위험한 활동을 위한 안전망

### 🔍 조사
- **증거 복사** - 플레이어에게 알리지 않고 인벤토리 검사
- **기록 분석** - 시간 경과에 따른 인벤토리 변경 검토
- **증거 수집** - 규칙 위반에 대한 증거 백업

---

## 📝 기술 세부사항

### 🏗️ 아키텍처
- **이벤트 기반** - 효율적인 NeoForge 이벤트 시스템
- **비동기 친화적** - 논블로킹 작업
- **JSON 저장** - 사람이 읽을 수 있는 백업 형식
- **NBT 보존** - 완전한 아이템 데이터 보존
- **컴포넌트 기반 UI** - 적절한 스타일링이 있는 네이티브 마인크래프트 텍스트 컴포넌트
- **I18n 지원** - 마인크래프트의 내장 번역 시스템 사용

### ⚡ 성능
- **비동기 I/O** - 논블로킹 디스크 작업으로 TPS 저하 방지
- **스마트 중복 제거** - 디스크 I/O 감소
- **지연 로딩** - 필요할 때만 백업 로드
- **효율적인 정리** - 시간당 백그라운드 작업
- **낮은 오버헤드** - 최소 서버 영향 (최대 2개 워커 스레드)
- **최적화된 페이지네이션** - 한 번에 10개 항목만 표시
- **작업 조절** - 최대 50개의 대기 중인 백업 작업

### 🌍 현지화
- **한국어 (ko_kr)** - 완전한 한국어 번역
- **영어 (en_us)** - 기본 언어
- **러시아어 (ru_ru)** - Полная русская локализация
- **자동 감지** - 클라이언트의 언어 설정 사용
- **확장 용이** - JSON 파일을 통해 새 언어 추가

### 🔐 데이터 형식
백업은 다음 구조의 JSON으로 저장됩니다:
```json
{
  "data": [
    {
      "index": 0,
      "nbt": "{id:\"minecraft:diamond_sword\",Count:1b,tag:{...}}"
    }
  ]
}
```

---

## 🎨 새로운 기능 (v2.0)

### ✨ GUI에서 개별 아이템 복사
- 백업 미리보기에서 아이템을 **드래그 앤 드롭**으로 직접 복사
- **Shift+클릭**으로 빠르게 아이템 복사
- 무한 복사 - 원본 백업은 그대로 유지
- 실시간 피드백 메시지

### 📦 컨테이너 닫기 이벤트
- 상자, 배럴, 셜커 박스 등 닫을 때 백업 생성
- 플레이어 인벤토리(E키)는 제외
- 설정으로 활성화/비활성화 가능
- 기본값: 비활성화 (많은 백업 방지)

### ⚡ 비동기 I/O 처리
- 디스크 작업이 서버 틱을 차단하지 않음
- 전용 워커 스레드 풀 (최대 2개)
- 자동 작업 조절 (최대 50개 대기)
- 느린 저장 감지 및 경고
- **사망 백업은 동기 유지** (데이터 손실 방지)

### 🌐 한국어 지원
- 완전한 한국어 번역
- 모든 메시지와 UI 텍스트
- 자동 언어 감지

---

## 🤝 크레딧

**PiglinMine.com에 특별히 감사드립니다**

---

## 📄 라이선스

**All Rights Reserved** - 이 모드는 독점 소프트웨어입니다.

---

<div align="center">

### 🌟 마인크래프트 NeoForge 1.21.1을 위해 ❤️로 만들었습니다

**[버그 신고](https://github.com/Pocky-l/InventoryLogger/issues)** • **[기능 요청](https://github.com/Pocky-l/InventoryLogger/issues)**

</div>
